<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 맵퍼의 위치를 적는 곳. -->
<mapper namespace="com.se.kmbss.mapper.BoardMapper">
        <sql id="BoardColumns">
                board_idn,
                user_idn,
                board_upload_date,
                board_modify_date,
                board_delete_date,
                board_content,
                board_location_city,
                board_location_sigungu,
                board_name,
                board_category,
                view_cnt
        </sql>

        <insert id="upload" parameterType="com.se.kmbss.mapper.BoardRequest" useGeneratedKeys="false">
                INSERT INTO BOARD(
                        <include refid="BoardColumns" />
                )VALUES(
                        board_seq.nextval,
                        null,
                        sysdate,
                        null,
                        null,
                        #{board_content},
                        #{board_location_city},
                        #{board_location_sigungu},
                        #{board_name},
                        0,
                        0
                )
        </insert>

        <select id="find_by_id" parameterType="int" resultType="com.se.kmbss.mapper.BoardResponse">
                select
                        <include refid="BoardColumns" />
                from
                        board
                where
                        board_idn=#{value}
        </select>

        <update id="modify" parameterType="com.se.kmbss.mapper.BoardRequest">
                update  board 
                set
                        board_modify_date = sysdate,
                        board_name = #{board_name},
                        board_content = #{board_content},
                        board_location_city = #{board_location_city},
                        board_location_sigungu = #{board_location_sigungu}
                where
                        board_idn=#{board_idn}
        </update>

        <delete id="delete_by_id" parameterType="com.se.kmbss.mapper.BoardRequest">
                update board 
                set
                        board_delete_date = sysdate
                where
                        board_idn=#{board_idn}
        </delete>

        <select id="find_all" resultType="com.se.kmbss.mapper.BoardResponse">
                select
                        <include refid="BoardColumns" />
                from
                        board
                where
                        board_delete_date is null
                order by
                        board_upload_date desc
        </select>
</mapper>
